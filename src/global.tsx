const isHttps = document.location.protocol === 'https:'

const clearCache = () => {
	// remove all caches
	if (window.caches) {
		caches
			.keys()
			.then((keys) => {
				keys.forEach((key) => {
					caches.delete(key)
				})
			})
			// eslint-disable-next-line no-console
			.catch((e) => console.log(e))
	}
}
if ('serviceWorker' in navigator && isHttps) {
	// unregister service worker
	const { serviceWorker } = navigator
	if (serviceWorker.getRegistrations) {
		serviceWorker.getRegistrations().then((sws) => {
			sws.forEach((sw) => {
				sw.unregister()
			})
		})
	}
	serviceWorker.getRegistration().then((sw) => {
		if (sw) sw.unregister()
	})

	clearCache()
}
